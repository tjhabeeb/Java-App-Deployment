# Java-App-Deployment

This README mirrors the original project setup PDF **word-for-word**, with commands and instructions preserved.

---

VPROFILEPROJECTSETUP
Prerequisite
1.
Oracle
VM
Virtualbox
2.
Vagrant
3.
Vagrant
plugins
Execute
below
command
in
your
computer
to
install
hostmanager
plugin
$vagrantplugininstallvagrant-hostmanager
4.
Git
bash
or
equivalent
editor
VMSETUP
1.
Clone
source
code.
2.
Cd
into
the
repository.
3.
Switch
to
the
local
branch.
4.
cd
into
vagrant/
Manual_provisioning
Bring
up
vm’s
$vagrantup
NOTE
:
Bringing
up
all
the
vm’s
may
take
a
long
time
based
on
various
factors.
If
vm
setup
stops
in
the
middle
run
“vagrant
up”
command
again.
INFO
:
All
the
vm’s
hostname
and
/etc/hosts
file
entries
will
be
automatically
updated.

PROVISIONING
Services
1.Nginx=>WebService2.Tomcat=>ApplicationServer3.RabbitMQ=>Broker/QueuingAgent4.Memcache=>DBCaching5.ElasticSearch=>Indexing/Searchservice6.MySQL=>SQLDatabase
Setup
should
be
done
in
below
mentioned
order
MySQL(DatabaseSVC)Memcache(DBCachingSVC)RabbitMQ(Broker/QueueSVC)Tomcat(ApplicationSVC)Nginx(WebSVC)


1.
MYSQL
Setup
Login
to
the
db
vm
$vagrantsshdb01
Verify
Hosts
entry ,
if
entries
missing
update
the
it
with
IP
and
hostnames
#cat/etc/hosts
Update
OS
with
latest
patches
#dnfupdate-y
Set
Repository
#dnfinstallepel-release-y
Install
Maria
DB
Package
#dnfinstallgitmariadb-server-y
Starting
&
enabling
mariadb-server
#systemctlstartmariadb#systemctlenablemariadb

RUN
mysql
secure
installation
script.
#mysql_secure_installation
NOTE
:
Set
db
root
password,
I
will
be
using
admin123
as
password
Setrootpassword?[Y/n]YNewpassword:Re-enternewpassword:Passwordupdatedsuccessfully!Reloadingprivilegetables.....Success!
Bydefault,aMariaDBinstallationhasananonymoususer,allowinganyonetologintoMariaDBwithouthavingtohaveauseraccountcreatedforthem.Thisisintendedonlyfortesting,andtomaketheinstallationgoabitsmoother.Youshouldremovethembeforemovingintoaproductionenvironment.
Removeanonymoususers?[Y/n]Y...Success!
Normally,rootshouldonlybeallowedtoconnectfrom'localhost'.Thisensuresthatsomeonecannotguessattherootpasswordfromthenetwork.
Disallowrootloginremotely?[Y/n]n...skipping.
Bydefault,MariaDBcomeswithadatabasenamed'test'thatanyonecanaccess.Thisisalsointendedonlyfortesting,andshouldberemovedbeforemovingintoaproductionenvironment.
Removetestdatabaseandaccesstoit?[Y/n]Y-Droppingtestdatabase......Success!-Removingprivilegesontestdatabase......Success!
Reloadingtheprivilegetableswillensurethatallchangesmadesofarwilltakeeffectimmediately.
Reloadprivilegetablesnow?[Y/n]Y...Success!

Set
DB
name
and
users.
#mysql-uroot-padmin123
mysql>createdatabaseaccounts;mysql>grantallprivilegesonaccounts.*TO'admin'@'localhost'identifiedby'admin123';mysql>grantallprivilegesonaccounts.*TO'admin'@'%'identifiedby'admin123';mysql>FLUSHPRIVILEGES;mysql>exit;
Download
Source
code
&
Initialize
Database.
#cd/tmp/#gitclone-blocalhttps://github.com/hkhcoder/vprofile-project.git#cdvprofile-project#mysql-uroot-padmin123accounts<src/main/resources/db_backup.sql#mysql-uroot-padmin123accounts
mysql>showtables;mysql>exit;
Restart
mariadb-server
#systemctlrestartmariadb
Starting
the
firewall
and
allowing
the
mariadb
to
access
from
port
no.
3306
#systemctlstartfirewalld#systemctlenablefirewalld#firewall-cmd--get-active-zones#firewall-cmd--zone=public--add-port=3306/tcp--permanent#firewall-cmd--reload#systemctlrestartmariadb

2.MEMCACHE
SETUP
Login
to
the
Memcache
vm
$vagrantsshmc01
Verify
Hosts
entry ,
if
entries
missing
update
the
it
with
IP
and
hostnames
#cat/etc/hosts
Update
OS
with
latest
patches
#dnfupdate-y
Install,
start
&
enable
memcache
on
port
11211
#sudodnfinstallepel-release-y#sudodnfinstallmemcached-y#sudosystemctlstartmemcached#sudosystemctlenablememcached#sudosystemctlstatusmemcached#sed-i's/127.0.0.1/0.0.0.0/g'/etc/sysconfig/memcached#sudosystemctlrestartmemcached
Starting
the
firewall
and
allowing
the
port
11211
to
access
memcache
#systemctlstartfirewalld#systemctlenablefirewalld#firewall-cmd--add-port=11211/tcp#firewall-cmd--runtime-to-permanent#firewall-cmd--add-port=11111/udp#firewall-cmd--runtime-to-permanent#sudomemcached-p11211-U11111-umemcached-d

3.RABBITMQ
SETUP
Login
to
the
RabbitMQ
vm
$vagrantsshrmq01
Verify
Hosts
entry ,
if
entries
missing
update
the
it
with
IP
and
hostnames
#cat/etc/hosts
Update
OS
with
latest
patches
#dnfupdate-y
Set
EPEL
Repository
#dnfinstallepel-release-y
Install
Dependencies
#sudodnfinstallwget-y#dnf-yinstallcentos-release-rabbitmq-38#dnf--enablerepo=centos-rabbitmq-38-yinstallrabbitmq-server#systemctlenable--nowrabbitmq-server
Setup
access
to
user
test
and
make
it
admin
#sudosh-c'echo"[{rabbit,[{loopback_users,[]}]}].">/etc/rabbitmq/rabbitmq.config'#sudorabbitmqctladd_usertesttest#sudorabbitmqctlset_user_tagstestadministrator#rabbitmqctlset_permissions-p/test".*"".*"".*"#sudosystemctlrestartrabbitmq-server
Starting
the
firewall
and
allowing
the
port
5672
to
access
rabbitmq
#sudosystemctlstartfirewalld#sudosystemctlenablefirewalld#firewall-cmd--add-port=5672/tcp#firewall-cmd--runtime-to-permanent#sudosystemctlstartrabbitmq-server#sudosystemctlenablerabbitmq-server#sudosystemctlstatusrabbitmq-server

4.TOMCAT
SETUP
Login
to
the
tomcat
vm
$vagrantsshapp01
Verify
Hosts
entry ,
if
entries
missing
update
the
it
with
IP
and
hostnames
#cat/etc/hosts
Update
OS
with
latest
patches
#dnfupdate-y
Set
Repository
#dnfinstallepel-release-y
Install
Dependencies
#dnf-yinstalljava-17-openjdkjava-17-openjdk-devel
#dnfinstallgitwget-y
Change
dir
to
/tmp
#cd/tmp/
Download
&
Tomcat
Package
#wgethttps://archive.apache.org/dist/tomcat/tomcat-10/v10.1.26/bin/apache-tomcat-10.1.26.tar.gz
#tarxzvfapache-tomcat-10.1.26.tar.gz
Add
tomcat
user
#useradd--home-dir/usr/local/tomcat--shell/sbin/nologintomcat

Copy
data
to
tomcat
home
dir
#cp-r/tmp/apache-tomcat-10.1.26/*/usr/local/tomcat/
Make
tomcat
user
owner
of
tomcat
home
dir
#chown-Rtomcat.tomcat/usr/local/tomcat
Setup
systemctl
command
for
tomcat
Create
tomcat
service
file
#vi/etc/systemd/system/tomcat.service
Update
the
file
with
below
content
[Unit]
Description=Tomcat
After=network.target
[Service]
User=tomcat
Group=tomcat
WorkingDirectory=/usr/local/tomcat
Environment=JAVA_HOME=/usr/lib/jvm/jre
Environment=CATALINA_PID=/var/tomcat/%i/run/tomcat.pid
Environment=CATALINA_HOME=/usr/local/tomcat
Environment=CATALINE_BASE=/usr/local/tomcat
ExecStart=/usr/local/tomcat/bin/catalina.shrun
ExecStop=/usr/local/tomcat/bin/shutdown.sh
RestartSec=10
Restart=always
[Install]
WantedBy=multi-user.target

Reload
systemd
files
#systemctldaemon-reload
Start
&
Enable
service
#systemctlstarttomcat#systemctlenabletomcat
Enabling
the
firewall
and
allowing
port
8080
to
access
the
tomcat
#systemctlstartfirewalld#systemctlenablefirewalld#firewall-cmd--get-active-zones#firewall-cmd--zone=public--add-port=8080/tcp--permanent#firewall-cmd--reload

CODE
BUILD
&
DEPLOY
(app01)
Maven
Setup
#cd/tmp/
#wgethttps://archive.apache.org/dist/maven/maven-3/3.9.9/binaries/apache-maven-3.9.9-bin.zip
#unzipapache-maven-3.9.9-bin.zip#cp-rapache-maven-3.9.9/usr/local/maven3.9#exportMAVEN_OPTS="-Xmx512m"
Download
Source
code
#gitclone-blocalhttps://github.com/hkhcoder/vprofile-project.git
Update
configuration
#cdvprofile-project#vimsrc/main/resources/application.properties#Updatefilewithbackendserverdetails
Build
code
Run
below
command
inside
the
repository
(vprofile-project)
#/usr/local/maven3.9/bin/mvninstall
Deploy
artifact
#systemctlstoptomcat
#rm-rf/usr/local/tomcat/webapps/ROOT*#cptarget/vprofile-v2.war/usr/local/tomcat/webapps/ROOT.war#systemctlstarttomcat#chowntomcat.tomcat/usr/local/tomcat/webapps-R#systemctlrestarttomcat

5.NGINX
SETUP
Login
to
the
Nginx
vm
$vagrantsshweb01$sudo-i
Verify
Hosts
entry ,
if
entries
missing
update
the
it
with
IP
and
hostnames
#cat/etc/hosts
Update
OS
with
latest
patches
#aptupdate#aptupgrade
Install
nginx
#aptinstallnginx-y
Create
Nginx
conf
file
#vi/etc/nginx/sites-available/vproapp
Update
with
below
content
upstreamvproapp{serverapp01:8080;}server{listen80;location/{proxy_passhttp://vproapp;}}
Remove
default
nginx
conf
#rm-rf/etc/nginx/sites-enabled/default
Create
link
to
activate
website
#ln-s/etc/nginx/sites-available/vproapp/etc/nginx/sites-enabled/vproapp
Restart
Nginx
#
systemctl
restart
nginx



